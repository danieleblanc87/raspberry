services:
  aiostreams:
    # Use the official AIOStreams image
    image: aiostreams/aiostreams:latest
    container_name: aiostreams
    
    # Ensure the container restarts automatically unless manually stopped
    restart: always
    
    # Map host port 8080 to container port 8080
    # Note: Using ports > 1024 is recommended for rootless Podman
    ports:
      - "8080:8080"
      
    environment:
      # Set the system timezone
      - TZ=Europe/Rome
      # Match these IDs with your Raspberry Pi user (usually 1000)
      - PUID=1000
      - PGID=1000
      
    volumes:
      # Relabeling (:Z) is crucial for Podman to handle SELinux/mount permissions correctly
      - ./config:/app/config:Z
      
    # Resource constraints to keep the Pi 5 stable
    deploy:
      resources:
        limits:
          memory: 512M

  #tunnel:
  #  image: cloudflare/cloudflared:latest
  #  container_name: cloudflared-tunnel
  #  restart: unless-stopped
  #  command: tunnel --no-autoupdate run --token <IL_TUO_TOKEN_QUI>